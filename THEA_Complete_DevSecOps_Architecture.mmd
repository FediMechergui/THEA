---
title: THEA Complete DevSecOps & Testing Architecture
config:
  theme: base
  themeVariables:
    primaryColor: "#2563eb"
    primaryTextColor: "#ffffff"
    primaryBorderColor: "#1e40af"
    lineColor: "#64748b"
    sectionBkgColor: "#f8fafc"
    altSectionBkgColor: "#e2e8f0"
    gridColor: "#cbd5e1"
    tertiaryColor: "#f1f5f9"
---

graph TB
    %% Styling
    classDef gateway fill:#3b82f6,stroke:#1e40af,stroke-width:3px,color:#ffffff
    classDef core fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
    classDef external fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#ffffff
    classDef data fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef devsecops fill:#dc2626,stroke:#b91c1c,stroke-width:2px,color:#ffffff
    classDef testing fill:#7c3aed,stroke:#5b21b6,stroke-width:2px,color:#ffffff
    classDef monitoring fill:#ea580c,stroke:#c2410c,stroke-width:2px,color:#ffffff

    %% Development & Source Control
    GIT["fa:fa-code-branch Git Repository<br/>Source Code"]:::devsecops
    GITHUB["fa:fa-github GitHub<br/>Version Control"]:::devsecops

    %% CI/CD Pipeline
    GHACTIONS["fa:fa-play-circle GitHub Actions<br/>CI/CD Pipeline"]:::devsecops
    JENKINS["fa:fa-cog Jenkins<br/>CI/CD Server"]:::devsecops
    DOCKER["fa:fa-docker Docker<br/>Containerization"]:::devsecops
    ANSIBLE["fa:fa-cogs Ansible<br/>Deployment Automation"]:::devsecops

    %% Testing Framework
    JEST["fa:fa-flask Jest Testing<br/>Unit & Integration Tests"]:::testing
    COVERAGE["fa:fa-chart-pie Coverage Reports<br/>HTML/LCOV/Cobertura"]:::testing
    TESTDB["fa:fa-database Test Databases<br/>Isolated Test Environment"]:::testing

    %% Security & Quality Gates
    SONARQUBE["fa:fa-shield-alt SonarQube<br/>Code Quality & Security"]:::devsecops
    SNYK["fa:fa-shield Snyk<br/>SCA & Dependency Scanning"]:::devsecops
    NESSUS["fa:fa-search Nessus<br/>Vulnerability Scanning"]:::devsecops
    OWASPZAP["fa:fa-spider OWASP ZAP<br/>Web App Security Testing"]:::devsecops
    TRIVY["fa:fa-container Trivy<br/>Container Security Scanning"]:::devsecops
    SECURITY["fa:fa-lock Security Scanning<br/>Vulnerability Assessment"]:::devsecops
    LINTING["fa:fa-check-circle ESLint<br/>Code Quality"]:::devsecops

    %% Load Balancer
    NGINX["fa:fa-server Nginx<br/>Load Balancer & Reverse Proxy"]:::gateway

    %% Production Infrastructure
    KUBERNETES["fa:fa-dharmachakra Kubernetes<br/>Container Orchestration"]:::devsecops
    HELM["fa:fa-anchor Helm Charts<br/>Package Management"]:::devsecops

    %% API Gateway & Core Services
    APIGW["fa:fa-server API Gateway<br/>Nginx/Traefik<br/>Port: 80/443"]:::gateway
    BACKEND["fa:fa-node-js Node.js Backend<br/>Express + Prisma<br/>Port: 3000"]:::core
    OCR["fa:fa-file-text FastAPI OCR Service<br/>Document Processing<br/>Port: 8000"]:::external
    CHATBOT["fa:fa-robot RAG Chatbot Service<br/>AI Assistant<br/>Port: 8001"]:::external

    %% Data Layer
    MYSQL["fa:fa-database MySQL 8.0<br/>Application DB<br/>Port: 3306"]:::data
    REDIS["fa:fa-bolt Redis<br/>Cache Layer<br/>Port: 6379"]:::data
    MINIO["fa:fa-cloud MinIO<br/>Object Storage<br/>Port: 9000"]:::data
    POSTGRES["fa:fa-database PostgreSQL<br/>Vector Store<br/>Port: 5432"]:::data

    %% Message Queue & Async Processing
    RABBITMQ["fa:fa-envelope RabbitMQ<br/>Message Broker<br/>Port: 5672"]:::data

    %% Monitoring & Observability
    PROMETHEUS["fa:fa-chart-line Prometheus<br/>Metrics Collection"]:::monitoring
    GRAFANA["fa:fa-chart-bar Grafana<br/>Dashboards<br/>Port: 3001"]:::monitoring
    LOGGING["fa:fa-file-alt Centralized Logging<br/>ELK Stack"]:::monitoring

    %% AI/ML Components
    OLLAMA["fa:fa-brain Ollama<br/>LLM Runtime"]:::external

    %% Development Flow
    subgraph "fa:fa-code Development & Source Control"
        GIT
        GITHUB
    end

    subgraph "fa:fa-play CI/CD Pipeline"
        GHACTIONS
        JENKINS
        DOCKER
        ANSIBLE
    end

    subgraph "fa:fa-flask Testing Framework"
        JEST
        COVERAGE
        TESTDB
    end

    subgraph "fa:fa-shield Security & Quality"
        SONARQUBE
        SNYK
        NESSUS
        OWASPZAP
        TRIVY
        SECURITY
        LINTING
    end

    subgraph "fa:fa-balance-scale Load Balancer"
        NGINX
    end

    subgraph "fa:fa-server Production Infrastructure"
        KUBERNETES
        HELM
    end

    subgraph "fa:fa-door-open API Gateway Layer"
        APIGW
    end

    subgraph "fa:fa-cogs Core Services"
        BACKEND
        OCR
        CHATBOT
    end

    subgraph "fa:fa-hdd Data & Storage"
        MYSQL
        REDIS
        MINIO
        POSTGRES
    end

    subgraph "fa:fa-envelope Message Queue"
        RABBITMQ
    end

    subgraph "fa:fa-brain AI/ML Stack"
        OLLAMA
    end

    subgraph "fa:fa-eye Monitoring & Observability"
        PROMETHEUS
        GRAFANA
        LOGGING
    end

    %% Development to CI/CD Flow
    GIT --> GITHUB
    GITHUB --> GHACTIONS
    GITHUB --> JENKINS
    GHACTIONS --> SONARQUBE
    GHACTIONS --> SNYK
    GHACTIONS --> NESSUS
    GHACTIONS --> OWASPZAP
    GHACTIONS --> TRIVY
    GHACTIONS --> SECURITY
    GHACTIONS --> LINTING
    GHACTIONS --> JEST
    JENKINS --> SONARQUBE
    JENKINS --> SNYK
    JENKINS --> NESSUS
    JENKINS --> OWASPZAP
    JENKINS --> TRIVY
    JENKINS --> SECURITY
    JENKINS --> LINTING
    JENKINS --> JEST
    JEST --> COVERAGE
    JEST --> TESTDB

    %% CI/CD to Production
    GHACTIONS --> DOCKER
    JENKINS --> DOCKER
    DOCKER --> ANSIBLE
    ANSIBLE --> NGINX
    NGINX --> KUBERNETES
    KUBERNETES --> HELM

    %% Production Architecture Connections
    HELM --> APIGW
    APIGW --> BACKEND
    APIGW --> OCR
    APIGW --> CHATBOT

    BACKEND --> MYSQL
    BACKEND --> REDIS
    BACKEND --> MINIO
    BACKEND --> RABBITMQ

    CHATBOT --> POSTGRES
    CHATBOT --> OLLAMA

    OCR --> MINIO
    OCR --> RABBITMQ

    %% Monitoring connections
    BACKEND --> PROMETHEUS
    MYSQL --> PROMETHEUS
    REDIS --> PROMETHEUS
    RABBITMQ --> PROMETHEUS
    MINIO --> PROMETHEUS
    APIGW --> PROMETHEUS

    PROMETHEUS --> GRAFANA
    BACKEND --> LOGGING
    APIGW --> LOGGING

    %% Security Flow
    SONARQUBE -.->|"fa:fa-check Quality Gate"| GHACTIONS
    SONARQUBE -.->|"fa:fa-check Quality Gate"| JENKINS
    SNYK -.->|"fa:fa-shield SCA Gate"| GHACTIONS
    SNYK -.->|"fa:fa-shield SCA Gate"| JENKINS
    NESSUS -.->|"fa:fa-search Vulnerability Gate"| GHACTIONS
    NESSUS -.->|"fa:fa-search Vulnerability Gate"| JENKINS
    OWASPZAP -.->|"fa:fa-spider DAST Gate"| GHACTIONS
    OWASPZAP -.->|"fa:fa-spider DAST Gate"| JENKINS
    TRIVY -.->|"fa:fa-container Container Gate"| GHACTIONS
    TRIVY -.->|"fa:fa-container Container Gate"| JENKINS
    SECURITY -.->|"fa:fa-shield Security Gate"| GHACTIONS
    SECURITY -.->|"fa:fa-shield Security Gate"| JENKINS
    LINTING -.->|"fa:fa-code Code Quality"| GHACTIONS
    LINTING -.->|"fa:fa-code Code Quality"| JENKINS

    %% Testing Flow
    JEST -.->|"fa:fa-flask Test Results"| GHACTIONS
    JEST -.->|"fa:fa-flask Test Results"| JENKINS
    COVERAGE -.->|"fa:fa-chart-pie Coverage Report"| GHACTIONS
    COVERAGE -.->|"fa:fa-chart-pie Coverage Report"| JENKINS
    TESTDB -.->|"fa:fa-database Test Data"| JEST

    %% Deployment Flow
    ANSIBLE -.->|"fa:fa-cogs Automated Deploy"| KUBERNETES
    HELM -.->|"fa:fa-anchor Package Deploy"| KUBERNETES
    NGINX -.->|"fa:fa-balance-scale Load Balancing"| KUBERNETES

    %% Flow annotations
    BACKEND -.->|"fa:fa-key JWT Auth"| APIGW
    OCR -.->|"fa:fa-upload Document Upload"| MINIO
    CHATBOT -.->|"fa:fa-reply AI Responses"| APIGW
    RABBITMQ -.->|"fa:fa-clock Async Processing"| BACKEND
    PROMETHEUS -.->|"fa:fa-chart-line Metrics"| GRAFANA
    LOGGING -.->|"fa:fa-file-alt Logs"| GRAFANA